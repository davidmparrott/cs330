#import <math.h>
#import <stdio.h>
#import <stdlib.h>

float myexp ( float x );

float myexp ( float x ) {
  float z = x / log ( 2 );
  float m = lround ( z );
  float w = z - m;
  float u = w * log ( 2 );

  float m2;
  if ( m < 0 ) {
    m = abs ( m );
    m2 = 1 / ( float ) ( 1 << m );
  }
  else
    m2 = 1 << m;

  float eu = 1 + u * ( ( 1 / 2.0 ) + u * ( ( 1 / 6.0 ) + u * ( ( 1 / 24.0 ) + u * ( ( 1 / 120 ) + u * ( ( 1 / 720 ) + ( u / 5040 ) ) ) ) ) );

  float ex = m2 * eu;
  return ex; 
}

